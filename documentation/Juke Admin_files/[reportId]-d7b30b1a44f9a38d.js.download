(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2396],{17946:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/reports/[reportId]",function(){return r(30666)}])},30666:function(t,e,r){"use strict";r.r(e);var n=r(54011),o=r(14134),s=r(33510),i=r(9551),a=r(89663),p=r(77423),u=r(66586),c=r(44922),l=r(3335),d=r(15281),f=r.n(d),h=r(97458),g=r(94796),m=r(64533),R=r(78828),v=r(66220),_=r(39378),y=r(78778),w=r(46623),E=function(t){(0,p.Z)(r,t);var e=(0,l.Z)(r);function r(t){var i;return(0,s.Z)(this,r),(i=e.call(this,t)).loadReport=function(t){var e=i.props.onErrorCatch,r=(0,n.Z)(i);v.bJ.getReportById({id:t,signal:i.signal}).then((function(e){i.setState({isLoading:!1,reportId:t,report:e,results:[]})})).catch(function(){var t=(0,o.Z)(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n);case 2:r.setState({isLoading:!1,report:void 0,results:[]});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},i.handleSubmit=function(t){i.setState({isUpdating:!0,compileReportRequest:t},(function(){return i.compileReport()}))},i.compileReport=function(){var t=i.props,e=t.onToast,r=t.onErrorCatch,s=i.state,a=s.reportId,p=s.compileReportRequest,u=(0,n.Z)(i);v.bJ.compileReportById({id:a,request:{request:p},signal:i.signal}).then((function(t){e({message:"Successfully ran report"}),i.setState({isUpdating:!1,results:m.sm.getResultsFromResponse(t)})})).catch(function(){var t=(0,o.Z)(f().mark((function t(e){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(e);case 2:u.setState({isUpdating:!1});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},i.getReportByType=function(){var t=i.state.report,e=null;if(t)switch(t.type){case g.Ig.PAST_DUE_PAYMENTS_UPCOMING:e=w.x3;break;case g.Ig.PAST_DUE_PAYMENTS_COMPLETED:e=w._f;break;default:m.$V.warn("unknown report type")}return e},i.state=(0,c.Z)((0,u.Z)({},g.uG),{report:void 0,reportId:void 0,results:[],compileReportRequest:{}}),i}var d=r.prototype;return d.componentDidMount=function(){(0,i.Z)((0,a.Z)(r.prototype),"componentDidMount",this).call(this);var t=this.props.router.query.reportId;t&&this.loadReport(t)},d.componentDidUpdate=function(t){var e=this.props.router.query.reportId,r=this.state.isLoading;e&&r&&this.loadReport(e),(0,_.isEqual)(t.router,this.props.router)||this.compileReport()},d.render=function(){var t=this.props,e=t.onToast,r=t.router,n=this.state,o=n.report,s=n.isLoading,i=n.isUpdating,a=n.results,p=this.getReportByType();return(0,h.jsxs)(R.ly,{isLoading:s,children:[(0,h.jsx)(w.pV,{title:"View Report"}),p?(0,h.jsx)(p,{report:o,results:a,onSubmit:this.handleSubmit,isUpdating:i,onToast:e,router:r}):(0,h.jsx)(R.g5,{message:"Unable to load report"})]})},r}(R.H6);e.default=(0,y.withRouter)(E)}},function(t){t.O(0,[9774,2888,179],(function(){return e=17946,t(t.s=e);var e}));var e=t.O();_N_E=e}]);