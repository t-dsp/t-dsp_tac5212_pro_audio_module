(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1043],{69826:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/locations/[locationId]",function(){return e(26758)}])},26758:function(t,n,e){"use strict";e.r(n);var o=e(54011),a=e(14134),i=e(33510),r=e(9551),s=e(89663),c=e(77423),u=e(66586),l=e(44922),d=e(3335),p=e(15281),h=e.n(p),E=e(97458),f=e(65412),g=e(94796),v=e(78828),T=e(64533),y=e(66220),C=e(78778),m=e(46623),S=function(t){(0,c.Z)(e,t);var n=(0,d.Z)(e);function e(t){var r;return(0,i.Z)(this,e),(r=n.call(this,t)).loadLocation=function(t){var n=r.props.onErrorCatch,e=(0,o.Z)(r),i=(0,o.Z)(r);y.b$.getLocationById({id:t,signal:r.signal}).then(function(){var n=(0,a.Z)(h().mark((function n(o){var a,i;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={locationId:t,pageSize:1e3,pageNumber:1},n.next=3,y.vo.getAllEvents({queryParameters:a,signal:e.signal});case 3:i=n.sent,e.setState({isLoading:!1,location:o,events:T.sm.getResultsFromResponse(i),locationId:t});case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch(function(){var t=(0,a.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(e);case 2:i.setState({isLoading:!1});case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())},r.handleSubmit=function(t){var n=r.props,e=n.onToast,i=n.onErrorCatch,s=r.state,c=s.locationId,l=s.location;r.setState({isUpdating:!0});var d=(0,o.Z)(r);y.b$.updateLocationById({id:c,request:t,signal:r.signal}).then((function(t){e({message:"Successfully updated location"}),r.setState({isUpdating:!1,location:(0,u.Z)({},l,t)})})).catch(function(){var t=(0,a.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(n);case 2:d.setState({isUpdating:!1});case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())},r.handleUpdate=function(t){var n=r.state.location;r.setState({location:(0,u.Z)({},n,t)})},r.renderLocationForm=function(){var t,n=r.props,e=n.onToast,o=n.onErrorCatch,a=r.state,i=a.location,s=a.isUpdating,c=a.events,u=i.locationType,l=i.latitude,d=(0,E.jsx)(v.wh,{location:i,onSubmit:r.handleSubmit,isUpdating:s,onUpdate:r.handleUpdate,onToast:e}),p=(0,E.jsx)(m.Y6,{events:c,title:"Associated Events"});switch(u){case g.Bq.DISPATCH_LOCATIONS:t=(0,E.jsxs)(E.Fragment,{children:[d,(0,E.jsx)(v.c4,{location:i,onToast:e,onErrorCatch:o,contactUpdatePath:f.yy.CONTACTS_UPDATE,contactCreatePath:f.yy.CONTACTS_CREATE,title:"Assigned Managers",roleType:g.K$.MANAGER}),(0,E.jsx)(v.c4,{location:i,onToast:e,onErrorCatch:o,contactUpdatePath:f.yy.CONTACTS_UPDATE,contactCreatePath:f.yy.CONTACTS_CREATE,title:"Assigned Employees",roleType:g.K$.EMPLOYEE}),l&&String(l).length>0?(0,E.jsx)("div",{className:"mt-3",children:(0,E.jsx)(v.t2,{nonSelectableLocations:[i],isAdmin:!0})}):null]});break;case g.Bq.VENUES:t=(0,E.jsxs)(E.Fragment,{children:[d,(0,E.jsx)(v.c4,{location:i,onToast:e,onErrorCatch:o,contactUpdatePath:f.yy.CONTACTS_UPDATE,contactCreatePath:f.yy.CONTACTS_CREATE,title:"Venue Managers",groupType:"VENUE_MANAGER"}),p]});break;case g.Bq.HOME_ADDRESSES:default:t=(0,E.jsxs)(E.Fragment,{children:[d,p]})}return t},r.state=(0,l.Z)((0,u.Z)({},g.uG),{location:void 0,locationId:void 0,events:[]}),r}var p=e.prototype;return p.componentDidMount=function(){(0,r.Z)((0,s.Z)(e.prototype),"componentDidMount",this).call(this);var t=this.props.router.query.locationId;t&&this.loadLocation(t)},p.componentDidUpdate=function(){var t=this.props.router.query.locationId,n=this.state.isLoading;t&&n&&this.loadLocation(t)},p.render=function(){var t=this.state,n=t.location,e=t.isLoading;return(0,E.jsxs)(v.ly,{isLoading:e,children:[(0,E.jsx)(m.pV,{title:"Edit Location ".concat(null===n||void 0===n?void 0:n.locationId)}),n?this.renderLocationForm():(0,E.jsx)(v.g5,{message:"Unable to load location"})]})},e}(v.H6);n.default=(0,C.withRouter)(S)}},function(t){t.O(0,[9774,2888,179],(function(){return n=69826,t(t.s=n);var n}));var n=t.O();_N_E=n}]);