(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5186],{4518:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/contacts",function(){return r(45389)}])},45389:function(e,t,r){"use strict";r.r(t);var n=r(33510),s=r(77423),i=r(66586),a=r(44922),o=r(3335),l=r(97458),u=r(94796),d=r(78828),c=r(64533),h=r(66220),f=r(39378),p=r(78778),C=r(40645),v=r(46623),m=r(65412),w=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e){var s;return(0,n.Z)(this,r),(s=t.call(this,e)).deleteUser=function(){var e=s.props.onErrorCatch,t=s.state.activeUser;s.setState({isUpdating:!0}),h.Wj.deleteUserById({id:t.id,signal:s.signal}).then((function(){s.setState({refreshList:!0})})).catch(e).finally((function(){s.setState({isUpdating:!1,activeUser:null,showDeleteModal:!1})}))},s.handleDeleteModal=function(e){e&&e.id?s.setState({showDeleteModal:!0,activeUser:e}):s.setState({activeUser:null,showDeleteModal:!1})},s.getTableHeaders=function(){return["First Name","Last Name","Email","Role","Date Created","Edit","Delete"]},s.getTableRows=function(e){var t=s.props.router;return e.map((function(e){var r=e.id,n=e.firstName,i=e.lastName,a=e.email,o=e.dateCreated,d=e.role;return{id:r,columns:[n,i,a,u.Sx[d],c.Cv.formatDateTime(c.Cv.formatUtcToLocalTimezone(o)),(0,l.jsx)(C.Z,{variant:"outline-primary",onClick:function(){return t.push(c.cw.getDynamicPath(m.yy.CONTACTS_UPDATE,[r]))},children:"Edit"},r),(0,l.jsx)(C.Z,{variant:"outline-danger",onClick:function(){return s.handleDeleteModal(e)},children:"Delete"},r)]}}))},s.handleRefresh=function(){s.setState({refreshList:!1})},s.state=(0,a.Z)((0,i.Z)({},u.uG),{showDeleteModal:!1,refreshList:!1,activeUser:void 0}),s}var p=r.prototype;return p.componentDidUpdate=function(e){var t=this.state.refreshList;(0,f.isEqual)(e.router,this.props.router)||t||this.setState({refreshList:!0})},p.render=function(){var e=this.props,t=e.router,r=e.currentUser,n=e.onErrorCatch,s=this.state,i=s.showDeleteModal,a=s.activeUser,o=s.isUpdating,u=s.refreshList;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.pV,{title:"Contacts",onClick:function(){return t.push(m.yy.CONTACTS_CREATE)},buttonText:"Create",variant:"outline-success"}),(0,l.jsx)(v.Z7,{getTableRows:this.getTableRows,getTableHeaders:this.getTableHeaders,refreshList:u,onRefresh:this.handleRefresh,onErrorCatch:n,defaultFilterIsOpen:!0}),i&&r.id===a.id?(0,l.jsx)(d.VF,{show:i,body:(0,l.jsx)("p",{children:"Unable to delete yourself. Please log in with a different account to delete this user."}),title:"Cannot Delete Current User",onClose:this.handleDeleteModal,isLoading:o}):null,i&&r.id!==a.id?(0,l.jsx)(d.VF,{show:i,body:(0,l.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,l.jsxs)("strong",{children:[a.firstName,"\u2018s"]})," account with the email: ",(0,l.jsx)("strong",{children:a.email}),"?"]}),title:"Delete User?",onClick:this.deleteUser,onClose:this.handleDeleteModal,buttonVariant:"outline-danger",buttonText:"Confirm Delete",isLoading:o}):null]})},r}(d.H6);t.default=(0,p.withRouter)(w)}},function(e){e.O(0,[9774,2888,179],(function(){return t=4518,e(e.s=t);var t}));var t=e.O();_N_E=t}]);